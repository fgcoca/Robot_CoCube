
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Web con información y programación del robot CoCube, un robot educativo de escritorio que incorpora inteligencia artificial. CoCube es un robot muy pequeño que integra comunicación inalámbrica, pantalla, interacción por voz y otras funciones. Incorpora una batería que le permite moverse con flexibilidad.">
      
      
        <meta name="author" content="Federico Coca">
      
      
        <link rel="canonical" href="https://fgcoca.github.io/Robot_CoCube/cocube/sentry2_linea/">
      
      
        <link rel="prev" href="../sentry2_trafico/">
      
      
        <link rel="next" href="../sentry2_april/">
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.5">
    
    
      
        <title>Reconocimiento de línea con Sentry2 - Robot CoCube</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6a10b989.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#objetivo" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Robot CoCube" class="md-header__button md-logo" aria-label="Robot CoCube" data-md-component="logo">
      
  <img src="../../img/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Robot CoCube
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reconocimiento de línea con Sentry2
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="deep-purple"  aria-label="Modo Oscuro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Modo Oscuro" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="deep-purple"  aria-label="Modo Claro"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Modo Claro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/fgcoca/Robot_CoCube" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Robot_CoCube
  </div>
</a>
      </div>
    
  </nav>
  
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Robot CoCube" class="md-nav__button md-logo" aria-label="Robot CoCube" data-md-component="logo">
      
  <img src="../../img/favicon.png" alt="logo">

    </a>
    Robot CoCube
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fgcoca/Robot_CoCube" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Robot_CoCube
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introducción
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../lcd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Progamación de la pantalla LCD
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../movimientos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Movimientos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../posicionamiento/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Posicionamiento
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../sonidos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sonidos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../pinza/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Servo con pinza
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../broadcast/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eventos de transmisión o broadcast
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../teclado/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control por eventos de teclado
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../com_UDP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comunicaciones UDP
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../remoto_wifi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control remoto mediante APP
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../sentry2_color/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconocimiento de color con Sentry2
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../sentry2_trafico/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tráfico inteligente con Sentry2
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Reconocimiento de línea con Sentry2
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Reconocimiento de línea con Sentry2
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo" class="md-nav__link">
    Objetivo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#materiales" class="md-nav__link">
    Materiales
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#informacion-de-algoritmos-de-sentry2" class="md-nav__link">
    Información de algoritmos de Sentry2
  </a>
  
    <nav class="md-nav" aria-label="Información de algoritmos de Sentry2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    Introducción
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-parametros" class="md-nav__link">
    Configuración de parámetros
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#devolucion-de-resultados" class="md-nav__link">
    Devolución de resultados
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consejos-de-uso" class="md-nav__link">
    Consejos de uso
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicacion-de-los-bloques-necesarios" class="md-nav__link">
    Explicación de los bloques necesarios
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programacion-de-cocube-siguelineas" class="md-nav__link">
    Programación de CoCube siguelineas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#funcionamiento-del-siguelineas" class="md-nav__link">
    Funcionamiento del siguelineas
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../sentry2_april/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reconocimiento de etiquetas Apriltag
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Miscelanea
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            Miscelanea
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Miscelanea/about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Miscelanea/lic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Licencias
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Miscelanea/soft/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software utilizado
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo" class="md-nav__link">
    Objetivo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#materiales" class="md-nav__link">
    Materiales
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#informacion-de-algoritmos-de-sentry2" class="md-nav__link">
    Información de algoritmos de Sentry2
  </a>
  
    <nav class="md-nav" aria-label="Información de algoritmos de Sentry2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    Introducción
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-parametros" class="md-nav__link">
    Configuración de parámetros
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#devolucion-de-resultados" class="md-nav__link">
    Devolución de resultados
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consejos-de-uso" class="md-nav__link">
    Consejos de uso
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicacion-de-los-bloques-necesarios" class="md-nav__link">
    Explicación de los bloques necesarios
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programacion-de-cocube-siguelineas" class="md-nav__link">
    Programación de CoCube siguelineas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#funcionamiento-del-siguelineas" class="md-nav__link">
    Funcionamiento del siguelineas
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Reconocimiento de línea con Sentry2</h1>

<h2 id="objetivo"><FONT COLOR=#007575><strong>Objetivo</strong></font><a class="headerlink" href="#objetivo" title="Permanent link">&para;</a></h2>
<p>Aprender sobre la función de detección de líneas del módulo AI Vision y utilizar CoCube para implementar la funcionalidad de seguimiento automático de líneas.</p>
<p>El video siguiente muestra la idea que se pretende programar.</p>
<p><center></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Qt4OLFEPJAI?si=i3I43mmXtxvO1N1e" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<p></center></p>
<h2 id="materiales"><FONT COLOR=#007575><strong>Materiales</strong></font><a class="headerlink" href="#materiales" title="Permanent link">&para;</a></h2>
<p>Robot CoCube, conector soporte para Sentry2, mapa de seguimiento de línea y ordenador ejecutando el IDE de MicroBlocks en cualquiera de sus versiones, estable instalada localmente o versiones online tanto estable como pilot. En cualquier caso tenemos que añadir las bibliotecas <strong>CoCube</strong>, <strong>CoCube module</strong> y <strong>Sentry2 AI camera</strong>.</p>
<p>El mapa de seguimiento de línea lo puedes descargar e imprimir en papel tamaño A3 en cualquiera de estos enlaces:</p>
<ul>
<li><a href="../../img/aux/mapa_siguelineas_original.pdf">Versión original</a></li>
<li><a href="../../img/aux/mapa_siguelineas_cast.pdf">Versión en castellano</a></li>
</ul>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/mat010.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Materiales" src="../../img/CoCube/mat010.png" /></a></p>
<p></center></p>
<p>Hay que realizar la conexión de de dispostivos colocando el soporte para la Sentry2, con la cámara colocada, en el conector de expansión del CoCube. El conector con 4 cables hay que colocarlo en el conector I2C de la cámara.</p>
<h2 id="informacion-de-algoritmos-de-sentry2"><FONT COLOR=#007575><strong>Información de algoritmos de Sentry2</strong></font><a class="headerlink" href="#informacion-de-algoritmos-de-sentry2" title="Permanent link">&para;</a></h2>
<h3 id="introduccion"><FONT COLOR=#AA0000>Introducción</font><a class="headerlink" href="#introduccion" title="Permanent link">&para;</a></h3>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/id4_res.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Línea" src="../../img/CoCube/id4_res.png" /></a>  </p>
<p></center></p>
<p>Detecta si hay líneas en la imagen. Si es así, devolverá los dos extremos y el ángulo de inclinación de la línea. Se pueden detectar hasta 5 segmentos de línea simultáneamente. Si se trata de una curva, devolverá un segmento recto aproximado.</p>
<p>En el enlace siguiente se puede ver un video, que aunque está en chino, se puede llegar a entender el funcionamiento del algoritmo de detección de línea:</p>
<p><center><a href="https://www.bilibili.com/video/BV1de4y137QU/">Sentry2 Vision Sensor - Line Detection Algorithm IntroductionBilibilibilibili</a></center></p>
<h3 id="configuracion-de-parametros"><FONT COLOR=#AA0000>Configuración de parámetros</font><a class="headerlink" href="#configuracion-de-parametros" title="Permanent link">&para;</a></h3>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/id4_param.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Configuración de parámetros" src="../../img/CoCube/id4_param.png" /></a>  </p>
<p></center></p>
<p>En la interfaz de usuario, puedes configurar el rendimiento del algoritmo y el número de segmentos de línea detectados simultáneamente.</p>
<ul>
<li><strong>Rendimiento del algoritmo:</strong></li>
</ul>
<p>Elige el rendimiento del algoritmo adecuado en función de los diferentes requisitos de la aplicación. Hay tres opciones: "Sensible (Sensitive)", "Equilibrado (Balance) y "Preciso (Accurate)".</p>
<p>En el modo sensible, responde mejor a los segmentos de línea pequeños. En el modo preciso, se ignorarán los segmentos de línea más pequeños. El modo predeterminado es el modo equilibrado.</p>
<ul>
<li><strong>Número de segmentos de línea:</strong></li>
</ul>
<p>Puedes establecer el valor entre 1 y 5 segmentos de línea.</p>
<h3 id="devolucion-de-resultados"><FONT COLOR=#AA0000>Devolución de resultados</font><a class="headerlink" href="#devolucion-de-resultados" title="Permanent link">&para;</a></h3>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/id4_resul.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Devolución de resultados" src="../../img/CoCube/id4_resul.png" /></a>  </p>
<p></center></p>
<p>Después de detectar una línea, devuelve sus dos extremos y el ángulo de inclinación.</p>
<div class="admonition note">
<p class="admonition-title"><strong>Nota:</strong></p>
<p>La horizontal derecha es 0 grados, aumentando en sentido antihorario; la vertical hacia arriba es 90 grados, la izquierda horizontal es 180 grados, por lo general no se detectan ángulos hacia abajo.</p>
</div>
<p>Se pueden detectar hasta 5 segmentos de línea simultáneamente. Para distinguirlos en la interfaz de usuario, se marcan según el orden de los resultados utilizando cinco colores: "rojo, amarillo, verde, azul y morado".</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/id4_resul_color_lin.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Devolución de resultados" src="../../img/CoCube/id4_resul_color_lin.png" /></a>  </p>
<p></center></p>
<p>Al leer los registros a través del controlador principal, se devolverán los siguientes datos:</p>
<table>
<thead>
<tr>
<th style="text-align: center;"><mark><strong>Resultado</strong></mark></th>
<th><mark><strong>Significado</strong></mark></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td>Coordenada X del punto final de la línea (superior)</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td>Coordenada Y del punto final de la línea (superior)</td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td>Coordenada X del punto inicial de la línea (inferior)</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td>Coordenada Y del punto inicial de la línea (inferior)</td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td>Grados de la línea</td>
</tr>
</tbody>
</table>
<h3 id="consejos-de-uso"><FONT COLOR=#AA0000>Consejos de uso</font><a class="headerlink" href="#consejos-de-uso" title="Permanent link">&para;</a></h3>
<ol>
<li>El fondo y las líneas deben estar claramente diferenciados; por ejemplo, un fondo blanco con líneas negras. Si el fondo está recargado, es posible que se detecten líneas en él.</li>
<li>El grosor de las líneas debe ser moderado; ni demasiado fino ni demasiado ancho.</li>
<li>En general, al seguir líneas, el primer segmento es siempre el que está en la parte inferior de la pantalla, seguido de los segmentos ramificados.</li>
</ol>
<h3 id="explicacion-de-los-bloques-necesarios"><FONT COLOR=#AA0000>Explicación de los bloques necesarios</font><a class="headerlink" href="#explicacion-de-los-bloques-necesarios" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Inicialización de Sentry2</strong>
Es un parámetro opcional que determina la dirección I2C del dispositivo. El valor por defecto es 96 (0x60) de entre el rango válido que va desde 96 (0x60) hasta 99 (0x63).</li>
</ul>
<p>Antes de poder usar Sentry2, debes inicializarla mediante el bloque de la imagen, que por lo general, se coloca debajo de un bloque tipo sombrero "al empezar".</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/B_inic_sentry2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Bloque para inicializar Sentry2" src="../../img/CoCube/B_inic_sentry2.png" /></a>  </p>
<p></center></p>
<ul>
<li><strong>Establecer modo de Sentry2</strong></li>
</ul>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/B_est_modo_sentry2_line.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Bloque Establecer modo de Sentry2" src="../../img/CoCube/B_est_modo_sentry2_line.png" /></a>  </p>
<p></center></p>
<p>Debes establecer el modo en linea (line), es decir, el modo de reconocimiento de de líneas.</p>
<ul>
<li><strong>Resultados de las pruebas de Sentry2</strong></li>
</ul>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/B_res_pruebas_sentry2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Bloque resultados de las pruebas de Sentry2" src="../../img/CoCube/B_res_pruebas_sentry2.png" /></a>  </p>
<p></center></p>
<p>Antes de usar este bloque, debes asegurarte de que el modo de algoritmo de línea esté habilitado.</p>
<p>Este bloque es también el bloque utilizado para desencadenar la detección, y solamente después de utilizar este bloque se pueden obtener resultados de detección.</p>
<p>El resultado devuelto es el número de resultados reconocidos por el algoritmo de LINE actual.</p>
<p>El número de resultados se ve afectado por la configuración de parámetros del algoritmo correspondiente.</p>
<ul>
<li><strong>Sentry2 detección de atributos del objeto línea</strong></li>
</ul>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/B_sentry2_line_detec.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Bloque detección de atributos del objeto línea" src="../../img/CoCube/B_sentry2_line_detec.png" /></a>  </p>
<p></center></p>
<p>Devuelve los atributos del objeto de detección de línea ID, incluidos la coordenada X del punto final (alta), la coordenada Y del punto final (alta), la coordenada X del punto inicial (baja), la coordenada Y del punto inicial (baja) y el ángulo de inclinación de la línea.</p>
<h2 id="programacion-de-cocube-siguelineas"><FONT COLOR=#007575><strong>Programación de CoCube siguelineas</strong></font><a class="headerlink" href="#programacion-de-cocube-siguelineas" title="Permanent link">&para;</a></h2>
<p><font color=#FF0000><strong>&#x2460;</strong></font> Conecta el IDE de MicroBlocks al robot CoCube a través de cable USB o por medios inalámbricos. Coloca el accesorio con la cámara Sentry2 en el conector magnético delantero.</p>
<p><font color=#FF0000><strong>&#x2461;</strong></font> Debes agregar las bibliotecas <strong>Sentry2 AI camera</strong>, <strong>CoCube</strong> y <strong>CoCube module</strong>.</p>
<p><font color=#FF0000><strong>&#x2462;</strong></font> Configura "Line" como en la imagen siguiente:</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/conf_line_sigue.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Configuración de linea para el siguelineas" src="../../img/CoCube/conf_line_sigue.png" /></a>  </p>
<p></center></p>
<p><font color=#FF0000><strong>&#x2463;</strong></font> Debajo de un bloque sombrero "al empezar" coloca el bloque "activa la alimentación del módulo" para que la Sentry2 se alimente a través del conector I2C. A continuación inicializa la interfaz I2C y coloca una espera de 4 segundos para dar tiempo a que el módulo de la cámara se inicie correctamente y, a continuación, establece el modo de algoritmo de la cámara en modo line (linea) para detectar lineas.</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/P_detec_color_ini.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Programa &quot;al comenzar&quot;" src="../../img/CoCube/P_detec_color_ini.png" /></a>  </p>
<p></center></p>
<p><font color=#FF0000><strong>&#x2464;</strong></font> En primer lugar, debemos utilizar el bloque "Sentry2 detect mode", que determina si hay resultado en la detección.</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/B_sentry2_detect_mode.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Bloque Sentry2 detect mode" src="../../img/CoCube/B_sentry2_detect_mode.png" /></a>  </p>
<p></center></p>
<p>Cuando "Sentry2 detect mode" es 1, se presentan por pantalla los 5 atributos de la detección de línea.</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/Sentry2_detect_mode_param.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Información de los parámetros de detección de línea" src="../../img/CoCube/Sentry2_detect_mode_param.png" /></a>  </p>
<p></center></p>
<p><font color=#FF0000><strong>&#x2465;</strong></font> Ahora, veamos cómo mantener CoCube en la línea en función de su posición y ángulo. Dado que CoCube utiliza un sistema de ruedas diferenciales, cuando se desvía de la línea, se debe ajustar la velocidad de las dos ruedas para corregir la dirección. Por lo tanto, debemos determinar cuándo realizar dicho ajuste, como se muestra en la siguiente figura:</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/Sentry2_detect_line_instant.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Instante de detección de línea" src="../../img/CoCube/Sentry2_detect_line_instant.png" /></a>  </p>
<p></center></p>
<ol>
<li>En primer lugar, si la línea se encuentra a la izquierda, significa que CoCube se ha desviado hacia la derecha. Lo ideal es que CoCube vuelva al centro de la línea más cercana lo antes posible. Por lo tanto, restamos el centro de la pantalla (50) a bottomX y lo dividimos por un coeficiente proporcional para obtener el valor diferencial, que se define como la primera parte o sumando del error.</li>
<li>En segundo lugar, si el ángulo de la línea no es de 90 grados (es decir, si hay un giro en la línea), debemos girar para seguirla. Por tanto, se resta el ángulo obtenido del ángulo recto (90) y se divide por otro coeficiente proporcional para obtener el valor diferencial, definido como el segundo sumando del erro. La suma de estos dos errores nos da el valor del error para la rueda.</li>
<li>La velocidad final de la rueda izquierda es igual a la velocidad lineal (20 en este caso) más los errores, y la velocidad de la rueda derecha es igual a la velocidad lineal (20 en este caso) menos los errores.</li>
</ol>
<p>El código es el siguiente:</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/Sentry2_control_dif.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Control diferencial de las ruedas" src="../../img/CoCube/Sentry2_control_dif.png" /></a>  </p>
<p></center></p>
<div class="admonition note">
<p class="admonition-title">Nota:</p>
<p>Aquí, los dos errores considerados adoptan la idea de retroalimentación negativa, de modo que ajustan la velocidad de la rueda según los errores reales para reducirlos.</p>
</div>
<p><font color=#FF0000><strong>&#x2466;</strong></font> Para finalizar se implementa la detención del robot cuando se pulsa el botón B. Para que tenga efecto el frenado de las ruedas hay que detener previamente el resto de tareas o el robot seguirá moviendose.</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/Sentry2_freno.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Frenado de la ruedas" src="../../img/CoCube/Sentry2_freno.png" /></a>  </p>
<p></center></p>
<p>El código completo lo vemos en la imagen siguiente y bajo la misma está el enlace de descarga del mismo.</p>
<p><center></p>
<p><a class="glightbox" href="../../img/CoCube/P_ejem_siguelineas.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Programación de CoCube siguelineas" src="../../img/CoCube/P_ejem_siguelineas.png" /></a><br />
<strong><a href="../../program/cocube/CoCube_siguelineas.ubp">Descargar el programa</a></strong></p>
<p></center></p>
<h2 id="funcionamiento-del-siguelineas"><FONT COLOR=#007575><strong>Funcionamiento del siguelineas</strong></font><a class="headerlink" href="#funcionamiento-del-siguelineas" title="Permanent link">&para;</a></h2>
<p>En el video siguiente se puede observar el funcionamiento del programa anterior:</p>
<p><center></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/4ttUMYz1rQw?si=xUsGuAPtFcDmjUCZ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<p></center></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Copyright y copia; 2025 Federico Coca – <a href="#consent">Cambiar configuración de cookies</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>Consentimiento de cookies</h4>
<p>Se utilizan cookies para reconocer las visitas repetidas y sus preferencias, así como para medir la eficacia de nuestra documentación y si los usuarios encuentran lo que buscan. Al aceptar, nos ayuda a mejorar nuestra documentación.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Aceptar</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Rechazar</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestionar cookies</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs.sticky", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="../../plugins/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>